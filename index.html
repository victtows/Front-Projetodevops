<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Perguntas e Respostas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f7fafc;
        }
        .card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .highlight {
            background: linear-gradient(to right, #f0fff4, #e6fffa);
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-12">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Cadastrar</h1>
                    <p class="text-gray-600">Sistema completo de cadastro de perguntas e respostas</p>
                </div>
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/fa85549c-0c8d-407d-9a92-588882f505d1.png" alt="Ícone de perguntas e respostas com design moderno em tons de azul e verde" class="w-24 h-24 rounded-full border-4 border-white shadow-lg" />
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Formulário de Cadastro -->
            <div class="lg:col-span-1">
                <div class="card bg-white rounded-xl shadow-md p-6 sticky top-8">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Cadastrar Nova Pergunta</h2>
                    <form id="faqForm" class="space-y-4">
                        <div>
                            <label for="question" class="block text-sm font-medium text-gray-700 mb-1">Pergunta</label>
                            <input type="text" id="question" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="answer" class="block text-sm font-medium text-gray-700 mb-1">Resposta</label>
                            <textarea id="answer" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required></textarea>
                        </div>
                        <div>
                            <label for="category" class="block text-sm font-medium text-gray-700 mb-1">Categoria</label>
                            <select id="category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="Geral">Geral</option>
                                <option value="Técnica">Técnica</option>
                                <option value="Financeira">Financeira</option>
                                <option value="Suporte">Suporte</option>
                            </select>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="isActive" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="isActive" class="ml-2 block text-sm text-gray-700">Ativo</label>
                        </div>
                        <input type="hidden" id="faqId">
                        <div class="flex space-x-3">
                            <button type="submit" id="submitBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition">Salvar</button>
                            <button type="button" id="cancelBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition hidden">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Listagem de Perguntas -->
            <div class="lg:col-span-2">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">Perguntas Cadastradas</h2>
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Buscar perguntas..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <div class="absolute left-3 top-2.5 text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div id="faqList" class="space-y-4">
                    <!-- Perguntas serão carregadas aqui dinamicamente -->
                    <div class="text-center py-10 text-gray-500" id="emptyState">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/04c99ea9-7811-4725-abd7-60d684d0fe85.png" alt="Ilustração de perguntas e respostas com balões de conversa e ícone de adicionar em tons suaves" class="mx-auto mb-4 max-w-xs" />
                        <p class="text-lg">Nenhuma pergunta cadastrada ainda.</p>
                        <p class="text-sm">Adicione sua primeira pergunta usando o formulário ao lado.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação -->
    <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md mx-4">
            <h3 class="text-lg font-semibold mb-4 text-gray-800" id="modalTitle">Confirmação</h3>
            <p id="modalMessage" class="mb-6 text-gray-600">Tem certeza que deseja excluir esta pergunta?</p>
            <div class="flex justify-end space-x-3">
                <button id="modalCancel" class="px-4 py-2 text-gray-600 font-medium rounded-lg">Cancelar</button>
                <button id="modalConfirm" class="px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados simulado
        let faqs = JSON.parse(localStorage.getItem('faqs')) || [];
        
        // Referências DOM
        const faqForm = document.getElementById('faqForm');
        const faqList = document.getElementById('faqList');
        const emptyState = document.getElementById('emptyState');
        const searchInput = document.getElementById('searchInput');
        const cancelBtn = document.getElementById('cancelBtn');
        const submitBtn = document.getElementById('submitBtn');
        const confirmModal = document.getElementById('confirmModal');
        
        // Variáveis de estado
        let currentEditId = null;
        let faqToDelete = null;
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            renderFaqs();
            
            // Event listeners
            faqForm.addEventListener('submit', handleSubmit);
            searchInput.addEventListener('input', handleSearch);
            cancelBtn.addEventListener('click', resetForm);
            
            // Modal listeners
            document.getElementById('modalCancel').addEventListener('click', () => {
                confirmModal.classList.add('hidden');
            });
            
            document.getElementById('modalConfirm').addEventListener('click', () => {
                deleteFaq(faqToDelete);
                confirmModal.classList.add('hidden');
            });
        });
        
        // Funções principais
        function handleSubmit(e) {
            e.preventDefault();
            
            const question = document.getElementById('question').value;
            const answer = document.getElementById('answer').value;
            const category = document.getElementById('category').value;
            const isActive = document.getElementById('isActive').checked;
            const id = document.getElementById('faqId').value;
            
            const faqData = {
                id: id || Date.now().toString(),
                question,
                answer,
                category,
                isActive,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            if (currentEditId) {
                updateFaq(faqData);
            } else {
                addFaq(faqData);
            }
            
            resetForm();
            renderFaqs();
        }
        
        function handleSearch(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            if (searchTerm.length > 0) {
                const filtered = faqs.filter(faq => 
                    faq.question.toLowerCase().includes(searchTerm) || 
                    faq.answer.toLowerCase().includes(searchTerm) ||
                    faq.category.toLowerCase().includes(searchTerm)
                );
                
                renderFaqList(filtered);
            } else {
                renderFaqs();
            }
        }
        
        // Operações CRUD
        function addFaq(faq) {
            faqs.unshift(faq);
            saveToLocalStorage();
        }
        
        function updateFaq(updatedFaq) {
            faqs = faqs.map(faq => 
                faq.id === updatedFaq.id ? updatedFaq : faq
            );
            saveToLocalStorage();
        }
        
        function deleteFaq(id) {
            faqs = faqs.filter(faq => faq.id !== id);
            saveToLocalStorage();
            renderFaqs();
        }
        
        function saveToLocalStorage() {
            localStorage.setItem('faqs', JSON.stringify(faqs));
        }
        
        // Renderização
        function renderFaqs() {
            renderFaqList(faqs);
        }
        
        function renderFaqList(faqsToRender) {
            if (faqsToRender.length === 0) {
                faqList.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            faqList.innerHTML = faqsToRender.map(faq => `
                <div class="card bg-white rounded-xl shadow-sm p-6 ${faq.isActive ? '' : 'opacity-80'}">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full ${getCategoryColor(faq.category)}">${faq.category}</span>
                        </div>
                        <div class="text-sm text-gray-500">${formatDate(faq.updatedAt)}</div>
                    </div>
                    <h3 class="text-lg font-semibold mb-2 text-gray-800">${faq.question}</h3>
                    <p class="text-gray-600 mb-4">${faq.answer}</p>
                    <div class="flex space-x-3">
                        <button onclick="editFaq('${faq.id}')" class="text-sm text-blue-600 hover:text-blue-800 font-medium">Editar</button>
                        <button onclick="confirmDelete('${faq.id}')" class="text-sm text-red-600 hover:text-red-800 font-medium">Excluir</button>
                        <button onclick="toggleFaqStatus('${faq.id}', ${faq.isActive})" class="text-sm ${faq.isActive ? 'text-orange-600 hover:text-orange-800' : 'text-green-600 hover:text-green-800'} font-medium">
                            ${faq.isActive ? 'Desativar' : 'Ativar'}
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Funções auxiliares
        function editFaq(id) {
            const faq = faqs.find(f => f.id === id);
            if (!faq) return;
            
            document.getElementById('question').value = faq.question;
            document.getElementById('answer').value = faq.answer;
            document.getElementById('category').value = faq.category;
            document.getElementById('isActive').checked = faq.isActive;
            document.getElementById('faqId').value = faq.id;
            
            currentEditId = id;
            cancelBtn.classList.remove('hidden');
            submitBtn.textContent = 'Atualizar';
            
            // Scroll para o formulário
            document.querySelector('#faqForm').scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        function toggleFaqStatus(id, currentStatus) {
            const faq = faqs.find(f => f.id === id);
            if (faq) {
                faq.isActive = !currentStatus;
                faq.updatedAt = new Date().toISOString();
                saveToLocalStorage();
                renderFaqs();
            }
        }
        
        function confirmDelete(id) {
            faqToDelete = id;
            confirmModal.classList.remove('hidden');
        }
        
        function resetForm() {
            faqForm.reset();
            document.getElementById('faqId').value = '';
            currentEditId = null;
            cancelBtn.classList.add('hidden');
            submitBtn.textContent = 'Salvar';
        }
        
        function getCategoryColor(category) {
            const colors = {
                'Geral': 'bg-gray-200 text-gray-800',
                'Técnica': 'bg-blue-100 text-blue-800',
                'Financeira': 'bg-green-100 text-green-800',
                'Suporte': 'bg-purple-100 text-purple-800'
            };
            return colors[category] || 'bg-gray-200 text-gray-800';
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR') + ' às ' + date.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
        }
    </script>
</body>
</html>